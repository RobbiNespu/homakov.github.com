<script>
function r(text,target){
  x=new XMLHttpRequest;
  x.open('get','https://www.googleapis.com/language/translate/v2?q='+encodeURIComponent(text)+'&target='+target+'&key='+localStorage.apikey, false);
  x.send();
  json = JSON.parse(x.responseText);
  var value = json.data.translations[0].translatedText
  document.getElementById('inp'+target).value = value;
  
  value=value.replace()
  document.getElementById('audio'+target).src = 'data:text/html,<audio controls  src="https://translate.google.com/translate_tts?ie=UTF-8&q='+encodeURIComponent(value)+'&tl='+target+'&total=1&idx=0&client=tl">play</audio>';
}

function tr(text,from){
  for(var i in langs){
    if(langs[i] != from){
      r(text,langs[i]);      
    }
  }
}



if(!localStorage.apikey){
  localStorage.apikey = prompt('Your key for Google Translate API (get at https://console.cloud.google.com/apis/credentials)');
}

if(!localStorage.langs){
  localStorage.langs = prompt('Comma separated langs e.g. "ru,es,en"');
}
if(localStorage.langs == 'null'){
  document.write('You are using WebView (open in your browser) or entered incorrect API key.')
}else{

var langs = localStorage.langs.split(',');
for(i in langs){
  var l=langs[i]
  document.write(l+':<br><textarea rows="10" cols="80" onchange=tr(this.value,"'+l+'"); id="inp'+l+'" placeholder="'+l+'"></textarea><br><iframe seamless border=0px height="20px" id="audio'+l+'"></iframe><br>');
}

}
  document.write('<br><a href=javascript:localStorage.clear();>clear localStorage</a>')

</script>